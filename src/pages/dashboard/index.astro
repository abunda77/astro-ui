---
import Layout03 from "@/layouts/Layout03.astro";
import Dashboard from "@/components/custom/Dashboard";
import "@/styles/globals.css";
import { getAccessToken, getUserId } from "@/utils/auth";
import { Toaster } from "@/components/ui/toaster";

const accessToken = getAccessToken();
const userId = getUserId();

// Jika pengguna tidak terautentikasi, arahkan mereka ke halaman login
// if (!isAuthenticated()) {
//   return Astro.redirect("/loginpage");
// }
---

<Layout03 title="Dashboard" />
<Dashboard client:load accessToken={accessToken} userId={userId} />

<Toaster client:load />
<script>
  import { isAuthenticated } from "@/utils/auth";

  if (!isAuthenticated()) {
    window.location.href = "/loginpage";
  }
</script>
