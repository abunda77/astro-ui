---
import { Button } from "@/components/ui/button";
import { ModeToggle } from "@/components/custom/ModeToggle";
import AvatarComponent from "@/components/custom/AvatarComponent";
import { MenuItems, Astronav } from "astro-navbar";
import Dropdown from "@/components/dropdown.astro";
import LoginButtons from "@/components/custom/LoginButtons";
import HeaderClientScript from "@/components/custom/HeaderClientScript";
import HeaderMenu from "@/components/custom/HeaderMenu";

const menuitems = [
  {
    title: "Features",
    path: "#",
    children: [
      { title: "Action", path: "/" },
      { title: "Another action", path: "#" },
      { title: "Dropdown Submenu", path: "#" },
      { title: "404 Page", path: "/404" },
    ],
  },
  { title: "Pricing", path: "/about" },
  { title: "About", path: "/about" },
  { title: "Blog", path: "/about" },
  { title: "Contact", path: "/about" },
  {
    title: "Pro Version",
    badge: true,
    path: "https://astroship-pro.web3templates.com/",
  },
];
---

<header class="w-full bg-gray-100 shadow-md dark:bg-gray-900">
  <div class="container px-4 mx-auto">
    <div class="flex items-center justify-between h-16">
      {/* Logo and Welcome Message */}
      <div class="flex items-center space-x-4">
        <div class="flex-shrink-0">
          <a href="/">
            <img id="themeLogo" class="w-auto h-10" alt="Logo" />
          </a>
        </div>
      </div>
      {/* Desktop Menu */}
      <div class="hidden md:block">
        <div class="flex items-baseline ml-10 space-x-4">
          <Astronav>
            <MenuItems class="hidden w-full mt-2 lg:w-auto lg:flex lg:mt-0">
              <ul class="flex flex-col lg:flex-row lg:gap-3">
                {
                  menuitems.map((item, index) => (
                    <>
                      {item.children && (
                        <Dropdown
                          title={item.title}
                          children={item.children}
                          lastItem={index === menuitems.length - 1}
                        />
                      )}
                      {!item.children && (
                        <li>
                          <a
                            href={item.path}
                            class="px-3 py-2 text-sm font-medium text-gray-800 rounded-md hover:bg-gray-200 dark:text-gray-300 dark:hover:bg-gray-700"
                          >
                            <span>{item.title}</span>
                            {item.badge && (
                              <span class="ml-1 px-2 py-0.5 text-[10px] animate-pulse font-semibold uppercase text-white bg-indigo-600 rounded-full">
                                New
                              </span>
                            )}
                          </a>
                        </li>
                      )}
                    </>
                  ))
                }
              </ul>
            </MenuItems>
          </Astronav>
        </div>
      </div>
      {/* Right side items */}
      <div class="items-center hidden space-x-8 md:flex">
        <AvatarComponent client:load />
        <LoginButtons client:load />
        <div class="items-center hidden space-x-8 md:flex">
          <ModeToggle client:load />
        </div><div
          id="welcomeMessage"
          class="text-sm font-medium dark:text-gray-300 animate-pulse"
        >
        </div>
      </div>
      {/* Mobile menu */}
      <HeaderMenu client:load menuitems={menuitems} />
    </div>
  </div>
  <Astronav />
</header>
{/* Running Text */}
<div class="w-screen overflow-hidden bg-gray-200 dark:bg-gray-800">
  <div class="container mx-auto">
    <div
      class="py-2 text-sm font-medium text-gray-800 dark:text-gray-300 whitespace-nowrap"
    >
      <span class="inline-block animate-marquee"
        >Welcome to our website! We're glad you're here.</span
      >
    </div>
  </div>
</div>
<style>
  @keyframes marquee {
    0% {
      transform: translateX(200%);
    }
    100% {
      transform: translateX(80%);
    }
  }

  @keyframes marquee-mobile {
    0% {
      transform: translateX(80%);
    }
    100% {
      transform: translateX(-100%);
    }
  }

  .animate-marquee {
    animation: marquee 5s linear infinite;
  }

  @media (max-width: 640px) {
    .animate-marquee {
      animation: marquee-mobile 15s linear infinite;
    }
  }
</style>

<HeaderClientScript client:load />
